<button id="addToCartBtn" data-pid="{{product._id}}">Agregar al carrito</button>
<p class="muted" id="msg"></p>

<script>
    const CART_ID = "PEGÁ_ACÁ_TU_CART_ID";
    const btn = document.getElementById("addToCartBtn");
    const msg = document.getElementById("msg");

    btn.addEventListener("click", async () => {
        const pid = btn.dataset.pid;
        const res = await fetch(`/api/carts/${CART_ID}/product/${pid}`, { method: "POST" });
        const data = await res.json().catch(()=>({}));
        if (!res.ok) {
        msg.textContent = "Error: " + (data.error || "No se pudo agregar");
        return;
        }
        msg.textContent = "✅ Agregado al carrito";
    });
</script>
